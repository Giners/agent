 ## Generated by NGINX Management Suite 1665497822 [APIM-e0e75130-966f-4e15-b94d-cf29a144457b] - instgroup:amazon
user nginx;
worker_processes auto;
worker_shutdown_timeout 60s;
pid /var/run/nginx.pid;
load_module modules/ngx_http_js_module.so;
events {
	worker_connections 8192;
}
worker_rlimit_nofile 20000;
http {
	types {
		text/html html htm shtml;
		text/css css;
		text/xml xml;
		image/gif gif;
		image/jpeg jpeg jpg;
		application/javascript js;
		application/atom+xml atom;
		application/rss+xml rss;
		text/mathml mml;
		text/plain txt;
		text/vnd.sun.j2me.app-descriptor jad;
		text/vnd.wap.wml wml;
		text/x-component htc;
		image/png png;
		image/svg+xml svg svgz;
		image/tiff tif tiff;
		image/vnd.wap.wbmp wbmp;
		image/webp webp;
		image/x-icon ico;
		image/x-jng jng;
		image/x-ms-bmp bmp;
		application/font-woff woff;
		application/java-archive jar war ear;
		application/json json;
		application/mac-binhex40 hqx;
		application/msword doc;
		application/pdf pdf;
		application/postscript ps eps ai;
		application/rtf rtf;
		application/vnd.apple.mpegurl m3u8;
		application/vnd.google-earth.kml+xml kml;
		application/vnd.google-earth.kmz kmz;
		application/vnd.ms-excel xls;
		application/vnd.ms-fontobject eot;
		application/vnd.ms-powerpoint ppt;
		application/vnd.oasis.opendocument.graphics odg;
		application/vnd.oasis.opendocument.presentation odp;
		application/vnd.oasis.opendocument.spreadsheet ods;
		application/vnd.oasis.opendocument.text odt;
		application/vnd.openxmlformats-officedocument.presentationml.presentation pptx;
		application/vnd.openxmlformats-officedocument.spreadsheetml.sheet xlsx;
		application/vnd.openxmlformats-officedocument.wordprocessingml.document docx;
		application/vnd.wap.wmlc wmlc;
		application/x-7z-compressed 7z;
		application/x-cocoa cco;
		application/x-java-archive-diff jardiff;
		application/x-java-jnlp-file jnlp;
		application/x-makeself run;
		application/x-perl pl pm;
		application/x-pilot prc pdb;
		application/x-rar-compressed rar;
		application/x-redhat-package-manager rpm;
		application/x-sea sea;
		application/x-shockwave-flash swf;
		application/x-stuffit sit;
		application/x-tcl tcl tk;
		application/x-x509-ca-cert der pem crt;
		application/x-xpinstall xpi;
		application/xhtml+xml xhtml;
		application/xspf+xml xspf;
		application/zip zip;
		application/octet-stream bin exe dll;
		application/octet-stream deb;
		application/octet-stream dmg;
		application/octet-stream iso img;
		application/octet-stream msi msp msm;
		audio/midi mid midi kar;
		audio/mpeg mp3;
		audio/ogg ogg;
		audio/x-m4a m4a;
		audio/x-realaudio ra;
		video/3gpp 3gpp 3gp;
		video/mp2t ts;
		video/mp4 mp4;
		video/mpeg mpeg mpg;
		video/quicktime mov;
		video/webm webm;
		video/x-flv flv;
		video/x-m4v m4v;
		video/x-mng mng;
		video/x-ms-asf asx asf;
		video/x-ms-wmv wmv;
		video/x-msvideo avi;
	}
	default_type application/json;
	sendfile on;
	# begin publication:apim-ws-4-env-4, generated for APIM-e0e75130-966f-4e15-b94d-cf29a144457b
	js_import js_logging from /etc/nginx/aux/json_log.js;
	js_set $json_log_a6827bb05aaa43e2d4b9883ee40cccfe js_logging.jsonLogPolicy;
	log_format json_log_policy_a6827bb05aaa43e2d4b9883ee40cccfe escape=none $json_log_a6827bb05aaa43e2d4b9883ee40cccfe;
	# end publication:apim-ws-4-env-4, generated for APIM-e0e75130-966f-4e15-b94d-cf29a144457b
	# begin publication:apim-ws-4-env-4, generated for APIM-e0e75130-966f-4e15-b94d-cf29a144457b
	upstream default_http_9647848a-2206-4d8f-991c-2e3704626289 {
		zone a-service-name_4 512k;
		server ergast.com:80;
	}
	# end publication:apim-ws-4-env-4, generated for APIM-e0e75130-966f-4e15-b94d-cf29a144457b
	# begin publication:apim-ws-4-env-4, generated for APIM-e0e75130-966f-4e15-b94d-cf29a144457b
	map $http_x_correlation_id $req_id_a6827bb05aaa43e2d4b9883ee40cccfe {
		"" $request_id;
		default $http_x_correlation_id;
	}
	map $request_uri $request_uri_path {
		"~^(?P<path>[^?]*)(\?.*)?$" $path;
	}
	map $host $apim_proxy_base_path {
		default -;
	}
	map $host $apim_proxy_version {
		default -;
	}
	map $host $apim_proxy_strip_bpv {
		default -;
	}
	map $host $apim_proxy_name {
		default -;
	}
	map $host $apim_svc_ws_name {
		default -;
	}
	map $host $apim_backend_svc_name {
		default -;
	}
	map $host $apim_proxy_uuid {
		default -;
	}
	map $host $apim_auth_client_id {
		default -;
	}
	# end publication:apim-ws-4-env-4, generated for APIM-e0e75130-966f-4e15-b94d-cf29a144457b
	# begin publication:apim-ws-4-env-4, generated for APIM-e0e75130-966f-4e15-b94d-cf29a144457b
	server {
		server_name 35.159.22.209;
		listen 80;
		status_zone server_47bff3fe-e00d-37d0-93dc-c36d9b249bde;
		client_max_body_size 1M;
		set $apim_env_name env-name;
		set $apim_env_type NON-PROD;
		set $apim_infra_ws_name finance-ws;
		set $correlation_id_header_name x-correlation-id;
		set $correlation_id_generic_value $req_id_a6827bb05aaa43e2d4b9883ee40cccfe;
		set $njs_settings_file /etc/nginx/aux/json_log_a6827bb05aaa43e2d4b9883ee40cccfe.json;
		access_log /var/log/nginx/35.159.22.209-access.log json_log_policy_a6827bb05aaa43e2d4b9883ee40cccfe;
		error_log /var/log/nginx/35.159.22.209-error.log warn;
		add_header x-correlation-id $req_id_a6827bb05aaa43e2d4b9883ee40cccfe always;
		add_header X-Backend-Latency $upstream_header_time;
		add_header X-Total-Request-Response-Latency $request_time;
		add_header X-Backend-Connection-Time $upstream_connect_time;
		add_header Cache-Control "public, must-revalidate, proxy-revalidate" always;
		add_header X-Client-Original-IP $realip_remote_addr always;
		add_header Strict-Transport-Security "max-age=31536000; includeSubDomains" always;
		add_header X-Frame-Options SAMEORIGIN always;
		add_header X-Content-Type-Options nosniff always;
		add_header X-Xss-Protection "1; mode=block" always;
		error_page 404 =404 /_commonerrors_err_fc636f32_default_404;
		error_page 405 =405 /_commonerrors_err_fc636f32_default_405;
		error_page 500 =500 /_commonerrors_err_fc636f32_default_500;
		error_page 501 =501 /_commonerrors_err_fc636f32_default_501;
		error_page 502 =502 /_commonerrors_err_fc636f32_default_502;
		error_page 503 =503 /_commonerrors_err_fc636f32_default_503;
		error_page 401 =401 /_commonerrors_err_fc636f32_default_401;
		error_page 403 =403 /_commonerrors_err_fc636f32_default_403;
		error_page 413 =413 /_commonerrors_err_fc636f32_default_413;
		error_page 429 =429 /_commonerrors_err_fc636f32_default_429;
		error_page 511 =511 /_commonerrors_err_fc636f32_default_511;
		error_page 400 =400 /_commonerrors_err_fc636f32_default_400;
		error_page 402 =402 /_commonerrors_err_fc636f32_default_402;
		location /v1/api {
			set $apim_proxy_name proxy-name;
			set $apim_proxy_uuid 9647848a-2206-4d8f-991c-2e3704626289;
			set $apim_proxy_base_path /api;
			set $apim_proxy_version v1;
			set $apim_proxy_strip_bpv false;
			set $apim_backend_svc_name a-service-name;
			set $apim_svc_ws_name proxy-name;
			proxy_set_header Host $host;
			proxy_set_header Accept-Encoding "";
			proxy_set_header Connection "";
			proxy_set_header X-Real-IP $remote_addr;
			proxy_set_header x-correlation-id $req_id_a6827bb05aaa43e2d4b9883ee40cccfe;
			proxy_pass http://default_http_9647848a-2206-4d8f-991c-2e3704626289;
		}
		location = /_commonerrors_err_fc636f32_default_404 {
			internal;
			return 404 '{"message":"Not Found","status":"404"}';
		}
		location = /_commonerrors_err_fc636f32_default_405 {
			internal;
			return 405 '{"message":"Method Not Allowed","status":"405"}';
		}
		location = /_commonerrors_err_fc636f32_default_500 {
			internal;
			return 500 '{"message":"Internal Server Error","status":"500"}';
		}
		location = /_commonerrors_err_fc636f32_default_501 {
			internal;
			return 501 '{"message":"Not Implemented","status":"501"}';
		}
		location = /_commonerrors_err_fc636f32_default_502 {
			internal;
			return 502 '{"message":"Bad Gateway","status":"502"}';
		}
		location = /_commonerrors_err_fc636f32_default_503 {
			internal;
			return 503 '{"message":"Service Unavailable","status":"503"}';
		}
		location = /_commonerrors_err_fc636f32_default_401 {
			internal;
			return 401 '{"message":"Unauthorized","status":"401"}';
		}
		location = /_commonerrors_err_fc636f32_default_403 {
			internal;
			return 403 '{"message":"Forbidden","status":"403"}';
		}
		location = /_commonerrors_err_fc636f32_default_413 {
			internal;
			return 413 '{"message":"Request Entity Too Large","status":"413"}';
		}
		location = /_commonerrors_err_fc636f32_default_429 {
			internal;
			return 429 '{"message":"Too Many Requests","status":"429"}';
		}
		location = /_commonerrors_err_fc636f32_default_511 {
			internal;
			return 511 '{"message":"Network Authentication Required","status":"511"}';
		}
		location = /_commonerrors_err_fc636f32_default_400 {
			internal;
			return 400 '{"message":"Bad Request","status":"400"}';
		}
		location = /_commonerrors_err_fc636f32_default_402 {
			internal;
			return 402 '{"message":"Payment Required","status":"402"}';
		}
		location / {
			return 404;
		}
	}
	# end publication:apim-ws-4-env-4, generated for APIM-e0e75130-966f-4e15-b94d-cf29a144457b
	server {
		server_name 127.0.0.1;
		listen 127.0.0.1:49151;
		access_log off;
		location /api {
			api;
		}
	}
}
